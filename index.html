<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Wasteland Drifter v14 (BitLife Style)</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap');

        /* --- THEME --- */
        :root {
            --bg: #050505; --card: #141414; --border: #333;
            --primary: #00e676; --danger: #ff5252; --warn: #ffab00; --rare: #d500f9;
            --text: #e0e0e0; --dim: #757575;
            --font: 'Roboto Mono', monospace;
        }

        /* Alternate Themes */
        body.theme-amber { --primary: #ffab00; --bg: #0a0500; }
        body.theme-cyan { --primary: #00b0ff; --bg: #00050a; }
        body.theme-red { --primary: #ff1744; --bg: #110000; --danger: #ff0000; }

        body {
            background-color: var(--bg); color: var(--text); font-family: var(--font);
            margin: 0; height: 100vh; display: flex; flex-direction: column; overflow: hidden;
            transition: background 0.3s;
        }

        /* --- LOADING --- */
        #loader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 9999;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        .spinner {
            width: 40px; height: 40px; border: 4px solid #333; border-top: 4px solid var(--primary);
            border-radius: 50%; animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* --- UI COMPONENTS --- */
        .header {
            padding: 10px 15px; background: rgba(20,20,20,0.98);
            border-bottom: 1px solid var(--border); z-index: 10; flex-shrink: 0;
        }
        .stat-row { display: flex; justify-content: space-between; font-size: 13px; font-weight: bold; margin-bottom: 5px; }
        .stat-bar { height: 6px; background: #333; border-radius: 3px; overflow: hidden; }
        .stat-fill { height: 100%; width: 100%; transition: width 0.3s ease; background: var(--danger); }
        .xp-fill { background: var(--primary); }

        .view-container {
            flex-grow: 1; overflow-y: auto; padding: 15px;
            padding-bottom: 100px; /* Space for nav */
            display: none; flex-direction: column; gap: 15px;
        }
        .view-container.active { display: flex; }

        .card {
            background: var(--card); border: 1px solid var(--border);
            border-radius: 8px; padding: 15px; position: relative;
        }
        .card h3 { margin: 0 0 10px 0; color: var(--primary); font-size: 16px; border-bottom: 1px solid #333; padding-bottom: 5px; }
        
        /* --- LOGS --- */
        .log-box {
            height: 150px; overflow-y: auto; background: #000; border: 1px solid #333; padding: 10px;
            display: flex; flex-direction: column-reverse; gap: 5px; border-radius: 4px; font-size: 12px;
        }
        .msg { border-left: 2px solid #555; padding-left: 5px; }
        .msg.good { border-color: var(--primary); color: #ccffcc; }
        .msg.bad { border-color: var(--danger); color: #ffcccc; }
        .msg.rare { border-color: var(--rare); color: #ffccff; }
        .msg.story { border-color: var(--warn); color: var(--warn); }

        /* --- BUTTONS --- */
        button {
            background: var(--card); border: 1px solid var(--border); color: var(--text);
            padding: 12px; border-radius: 6px; font-family: inherit; font-weight: bold;
            cursor: pointer; width: 100%; margin-top: 5px; transition: 0.2s;
            font-size: 12px; text-transform: uppercase;
        }
        button:active { transform: scale(0.98); background: #222; }
        button.primary { background: var(--primary); color: #000; border: none; }
        button.danger { background: var(--danger); color: #fff; border: none; }
        
        /* --- NAV DECK --- */
        .nav-deck {
            position: fixed; bottom: 0; width: 100%;
            background: rgba(10,10,10,0.95); border-top: 1px solid var(--border);
            display: grid; grid-template-columns: repeat(4, 1fr);
            padding: 5px; backdrop-filter: blur(5px); z-index: 20;
        }
        .nav-btn {
            background: transparent; border: none; color: var(--dim);
            padding: 10px; display: flex; flex-direction: column; align-items: center;
            font-size: 10px; gap: 5px;
        }
        .nav-btn.active { color: var(--primary); }

        /* --- GRAVEYARD --- */
        .tombstone {
            background: #222; border: 2px solid #555; border-radius: 10px 10px 0 0;
            padding: 15px; text-align: center; margin-bottom: 10px;
        }
        .tomb-title { font-size: 18px; color: var(--rare); font-weight: bold; }
        .tomb-desc { font-size: 12px; color: #aaa; margin-top: 5px; }

        /* --- INVENTORY GRID --- */
        .inv-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; margin-top: 10px; }
        .inv-slot {
            aspect-ratio: 1; background: #222; border: 1px solid #444; border-radius: 4px;
            display: flex; justify-content: center; align-items: center; font-size: 20px; cursor: pointer;
        }
        .inv-slot.filled { border-color: var(--dim); }

        /* --- OVERLAYS --- */
        .overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.95); z-index: 50; display: none;
            flex-direction: column; justify-content: center; align-items: center; padding: 20px;
        }
        
        .modal-box {
            background: var(--card); border: 2px solid var(--primary);
            padding: 20px; width: 100%; max-width: 400px; text-align: center;
            border-radius: 10px; box-shadow: 0 0 30px rgba(0,0,0,0.8);
        }

        /* Combat Specifics */
        .enemy-box { text-align: center; margin-bottom: 20px; animation: float 3s infinite ease-in-out; }
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0px); } }
        .enemy-sprite { font-size: 60px; display: block; }
        .hp-container { width: 100%; background: #333; height: 10px; border-radius: 5px; overflow: hidden; margin-top: 5px; }
        .hp-fill { height: 100%; width: 100%; transition: width 0.3s; }
        .hp-enemy { background: var(--danger); }
        .combat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; width: 100%; max-width: 400px; }

    </style>
</head>
<body>

    <div id="loader">
        <div class="spinner"></div>
        <div style="margin-top: 20px; font-size: 14px;">SYSTEM INITIALIZING...</div>
    </div>

    <div class="header">
        <div class="stat-row">
            <span>HP <span id="hp-val">100/100</span></span>
            <span>DAY <span id="day-val">1</span></span>
        </div>
        <div class="stat-bar"><div class="stat-fill" id="hp-bar"></div></div>
        
        <div class="stat-row" style="margin-top:8px; color:var(--dim);">
            <span>SCRAP: <span id="scrap-val" style="color:var(--text)">0</span></span>
            <span>XP: <span id="xp-val">0</span></span>
        </div>
        <div class="stat-bar" style="height:3px; background:#222;"><div class="stat-fill xp-fill" id="xp-bar" style="width:0%"></div></div>
    </div>

    <div id="view-bunker" class="view-container active">
        <div class="card">
            <h3>PLAN EXPEDITION</h3>
            <p>Select items. Max 5 slots.</p>
            <div style="background:#222; padding:10px; margin-bottom:10px;">
                <div id="prep-grid" class="inv-grid"></div>
            </div>
            <div class="grid-2">
                <button onclick="addToPack('food')">+ FOOD (<span id="stash-food">0</span>)</button>
                <button onclick="addToPack('meds')">+ MEDS (<span id="stash-meds">0</span>)</button>
            </div>
            <button class="primary" style="margin-top:10px;" onclick="startExpedition()">LEAVE BUNKER</button>
        </div>

        <div class="card" style="border-color: var(--warn);">
            <h3 style="color:var(--warn)">üåô END DAY</h3>
            <p>Consume food/water and sleep. Random night events may occur.</p>
            <button class="primary" style="background:var(--warn); color:#000;" onclick="endDay()">SLEEP & AGE UP</button>
        </div>

        <div class="card">
            <h3>LOG</h3>
            <div id="bunker-log" class="log-box"></div>
        </div>
    </div>

    <div id="view-expedition" class="view-container">
        <div class="card" style="border-color:var(--danger); text-align:center;">
            <h2 style="margin:0; color:var(--danger);">MILE <span id="mile-display">0</span></h2>
            <div id="active-buff-display" style="display:none; color:var(--warn); font-size:10px;">BUFF ACTIVE</div>
        </div>

        <div class="card">
            <h3>STATUS</h3>
            <div>HP: <span id="exp-hp">100</span>%</div>
            <div class="hp-container"><div id="bar-hp" class="hp-fill" style="background:var(--primary);"></div></div>
            <div style="margin-top:10px; display:flex; justify-content:space-between; font-size:12px;">
                <span>üéí Food: <span id="pack-food">0</span></span>
                <span>üéí Meds: <span id="pack-meds">0</span></span>
            </div>
        </div>

        <div id="exp-controls">
            <button class="primary" onclick="nextMile()">PUSH DEEPER</button>
            <button class="danger" onclick="endExpedition()">RETURN HOME</button>
        </div>
        
        <div id="exp-log" class="log-box"></div>
    </div>

    <div id="view-workshop" class="view-container">
        <div class="card">
            <h3>üõ†Ô∏è WORKSHOP</h3>
            <div style="margin-bottom:10px; border-bottom:1px solid #333; padding-bottom:5px;">
                <div style="font-weight:bold;">üõèÔ∏è Bed (20 Scrap)</div>
                <p>Better sleep healing.</p>
                <button onclick="buyUpgrade('bed', 20)">INSTALL</button>
            </div>
            <div style="margin-bottom:10px; border-bottom:1px solid #333; padding-bottom:5px;">
                <div style="font-weight:bold;">üõ°Ô∏è Armor (60 Scrap)</div>
                <p>-2 Damage taken.</p>
                <button onclick="buyUpgrade('armor', 60)">CRAFT</button>
            </div>
        </div>

        <div class="card">
            <h3>üé® THEME</h3>
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:5px;">
                <button style="color:#00e676; border-color:#00e676;" onclick="setTheme('')">GREEN</button>
                <button style="color:#ffab00; border-color:#ffab00;" onclick="setTheme('theme-amber')">AMBER</button>
                <button style="color:#00b0ff; border-color:#00b0ff;" onclick="setTheme('theme-cyan')">CYAN</button>
                <button style="color:#ff1744; border-color:#ff1744;" onclick="setTheme('theme-red')">RED</button>
            </div>
        </div>
    </div>

    <div id="view-graveyard" class="view-container">
        <div class="card">
            <h3>ü™¶ PAST LIVES</h3>
            <p>A record of those who came before.</p>
            <div id="grave-list"></div>
            <button class="danger" onclick="clearGraveyard()">CLEAR HISTORY</button>
        </div>
        <div class="card">
            <h3>SYSTEM</h3>
            <button class="danger" onclick="resetData()">RESET CURRENT RUN</button>
        </div>
    </div>

    <div id="combat-overlay" class="overlay">
        <h2 style="color:var(--danger);">COMBAT MODE</h2>
        <div class="card enemy-box">
            <span id="enemy-icon" class="enemy-sprite">üêÄ</span>
            <div id="enemy-name" style="font-weight:bold; color:var(--danger);">Mutant Rat</div>
            <div class="hp-container"><div id="enemy-bar" class="hp-fill hp-enemy"></div></div>
            <div style="font-size:12px;">HP: <span id="enemy-hp">20</span></div>
        </div>
        <div id="combat-msg" style="height:20px; color:#aaa; font-size:12px; margin-bottom:10px;">Your turn...</div>
        <div class="combat-grid">
            <button class="primary" onclick="playerAction('slash')">SLASH (1 AP)</button>
            <button onclick="playerAction('block')">BLOCK (1 AP)</button>
            <button class="danger" onclick="playerAction('heavy')">SMASH (2 AP)</button>
            <button onclick="useCombatItem()">HEAL (2 AP)</button>
        </div>
    </div>

    <div id="event-overlay" class="overlay">
        <div class="modal-box">
            <h2 id="evt-title" style="color:var(--primary); margin-top:0;">EVENT</h2>
            <p id="evt-desc" style="color:var(--text); margin-bottom:20px;"></p>
            <div id="evt-choices" style="display:flex; flex-direction:column; gap:10px;"></div>
        </div>
    </div>

    <div id="death-screen" class="overlay">
        <h1 style="color:var(--danger);">YOU DIED</h1>
        <h3 id="death-title" style="color:var(--rare);">TITLE: THE UNKNOWN</h3>
        <p id="death-stats" style="color:#aaa;"></p>
        <button style="width:200px; margin-top:20px;" onclick="respawn()">NEW DRIFTER</button>
    </div>

    <div class="nav-deck">
        <button class="nav-btn active" onclick="setView('bunker', this)"><span>üè†</span>HUB</button>
        <button class="nav-btn" onclick="setView('workshop', this)"><span>üõ†Ô∏è</span>UPG</button>
        <button class="nav-btn" onclick="setView('graveyard', this)"><span>ü™¶</span>LIFE</button>
    </div>

    <script>
        // ==========================================
        // 1. GAME STATE
        // ==========================================
        const ENEMIES = [
            { name: "Rad-Rat", hp: 20, dmg: 5, icon: "üêÄ", loot: 2 },
            { name: "Scavenger", hp: 40, dmg: 8, icon: "üë∫", loot: 5 },
            { name: "Mutant", hp: 100, dmg: 15, icon: "ü¶ç", loot: 15 }
        ];

        let state = {
            stash: { food: 5, meds: 2, scrap: 0 },
            upgrades: { bed: false, armor: false },
            stats: { kills: 0, daysAlive: 0, scrapFound: 0 },
            collection: [],
            graveyard: [],
            theme: ''
        };

        // Run State
        let run = { active: false, hp: 100, maxHp: 100, mile: 0, backpack: { food: 0, meds: 0 }, loot: 0 };
        let combat = { active: false, enemy: null, energy: 3, blocking: false };

        window.onload = () => {
            const save = localStorage.getItem('wd_v14_save');
            if(save) { state = JSON.parse(save); if(state.theme) document.body.className = state.theme; }
            updateUI();
            setTimeout(() => document.getElementById('loader').style.display = 'none', 800);
        };

        // ==========================================
        // 2. DAY CYCLE (BITLIFE STYLE)
        // ==========================================
        function endDay() {
            // 1. Consumption
            if(state.stash.food > 0) {
                state.stash.food--;
                let heal = state.upgrades.bed ? 20 : 10;
                run.hp = Math.min(run.hp + heal, 100);
                logBunker("Ate food and slept. HP restored.", "good");
            } else {
                run.hp -= 20;
                logBunker("STARVING! No food. -20 HP.", "bad");
            }

            // 2. Night Event
            let roll = Math.random();
            if(roll < 0.2) {
                // Raid
                let steal = Math.floor(Math.random() * 5) + 1;
                if(state.stash.scrap >= steal) {
                    state.stash.scrap -= steal;
                    logBunker(`Night Raid! Thieves stole ${steal} Scrap!`, "bad");
                } else {
                    logBunker("Night Raid! Thieves found nothing.", "bad");
                }
            } else if(roll < 0.3) {
                // Nightmare
                logBunker("Had a nightmare about the war.", "dim");
            } else {
                logBunker("A quiet night.", "dim");
            }

            state.stats.daysAlive++;
            checkDeath("Died in sleep (Starvation)");
            updateUI();
        }

        // ==========================================
        // 3. EXPEDITION
        // ==========================================
        function addToPack(item) {
            let count = run.backpack.food + run.backpack.meds;
            if(count >= 5) return alert("Backpack Full!");
            if(state.stash[item] > 0) { state.stash[item]--; run.backpack[item]++; updateUI(); }
        }

        function startExpedition() {
            run.active = true;
            run.mile = 0;
            run.loot = 0;
            switchView('expedition');
            document.querySelector('.nav-deck').style.display = 'none';
            document.getElementById('exp-log').innerHTML = ''; 
            logExp("Left the bunker...");
            updateExpUI();
        }

        function nextMile() {
            run.mile++;
            let risk = 20 + (run.mile * 5);
            if(Math.random() * 100 < risk) {
                // Combat
                let elvl = Math.min(Math.floor(run.mile/3), ENEMIES.length-1);
                startCombat(ENEMIES[elvl]);
            } else {
                // Loot
                let amt = Math.floor(Math.random()*5) + run.mile;
                run.loot += amt;
                state.stats.scrapFound += amt;
                logExp(`Mile ${run.mile}: Found ${amt} Scrap.`, "good");
                
                // Event Chance
                if(Math.random() < 0.2) triggerEvent();
            }
            updateExpUI();
        }

        function endExpedition() {
            state.stash.scrap += run.loot;
            state.stash.food += run.backpack.food;
            state.stash.meds += run.backpack.meds;
            run.active = false;
            run.backpack = {food:0, meds:0};
            switchView('bunker');
            document.querySelector('.nav-deck').style.display = 'grid';
            logBunker(`Returned safely. +${run.loot} Scrap.`, "good");
            updateUI();
        }

        // ==========================================
        // 4. COMBAT
        // ==========================================
        function startCombat(template) {
            combat = { active: true, enemy: {...template}, energy: 3, blocking: false, curHp: template.hp };
            document.getElementById('combat-overlay').style.display = 'flex';
            document.getElementById('enemy-name').innerText = combat.enemy.name;
            document.getElementById('enemy-icon').innerText = combat.enemy.icon;
            updateCombatUI();
        }

        function playerAction(type) {
            let cost = (type === 'heavy' || type === 'heal') ? 2 : 1;
            if(combat.energy < cost) return;
            combat.energy -= cost;

            if(type === 'slash') {
                combat.curHp -= 5;
                document.getElementById('combat-msg').innerText = "Hit for 5 damage!";
            } else if(type === 'heavy') {
                combat.curHp -= 12;
                document.getElementById('combat-msg').innerText = "Heavy Hit! 12 damage!";
            } else if(type === 'block') {
                combat.blocking = true;
                document.getElementById('combat-msg').innerText = "Blocking next attack.";
            } else if(type === 'heal' && run.backpack.meds > 0) {
                run.backpack.meds--;
                run.hp = Math.min(100, run.hp+40);
            }

            updateCombatUI();
            if(combat.curHp <= 0) winCombat();
            else if(combat.energy <= 0) setTimeout(enemyTurn, 1000);
        }

        function enemyTurn() {
            let dmg = combat.enemy.dmg;
            if(state.upgrades.armor) dmg -= 2;
            if(combat.blocking) dmg = Math.floor(dmg/2);
            
            run.hp -= Math.max(0, dmg);
            combat.energy = 3; combat.blocking = false;
            document.getElementById('combat-msg').innerText = `Enemy dealt ${dmg} dmg!`;
            updateCombatUI();
            if(run.hp <= 0) { document.getElementById('combat-overlay').style.display='none'; checkDeath("Killed by " + combat.enemy.name); }
        }

        function winCombat() {
            document.getElementById('combat-overlay').style.display = 'none';
            run.loot += combat.enemy.loot;
            state.stats.kills++;
            logExp(`Defeated ${combat.enemy.name}.`, "good");
            updateExpUI();
        }

        function updateCombatUI() {
            let pct = Math.max(0, (combat.curHp / combat.enemy.hp) * 100);
            document.getElementById('enemy-bar').style.width = pct + "%";
            document.getElementById('enemy-hp').innerText = combat.curHp;
        }

        // ==========================================
        // 5. DEATH & GRAVEYARD
        // ==========================================
        function checkDeath(cause) {
            if(run.hp <= 0) {
                let title = "THE FORGOTTEN";
                if(state.stats.kills > 10) title = "THE WARLORD";
                if(state.stats.scrapFound > 500) title = "THE HOARDER";
                if(state.stats.daysAlive < 5) title = "THE NOVICE";
                if(state.stats.daysAlive > 50) title = "THE ELDER";

                // Save to Graveyard
                state.graveyard.unshift({ 
                    title: title, 
                    days: state.stats.daysAlive, 
                    cause: cause, 
                    date: new Date().toLocaleDateString() 
                });
                
                // Show Screen
                document.getElementById('death-title').innerText = title;
                document.getElementById('death-stats').innerText = `Survived ${state.stats.daysAlive} Days. ${cause}.`;
                document.getElementById('death-screen').style.display = 'flex';
                saveGame();
            }
        }

        function respawn() {
            // Reset Stats but keep settings/graveyard
            state.stash = { food: 5, meds: 2, scrap: 0 };
            state.stats = { kills: 0, daysAlive: 0, scrapFound: 0 };
            run.hp = 100; run.active = false;
            document.getElementById('death-screen').style.display = 'none';
            document.querySelector('.nav-deck').style.display = 'grid';
            switchView('bunker');
            updateUI();
        }

        // ==========================================
        // 6. UTILS & UI
        // ==========================================
        function triggerEvent() {
            showModal("OLD CRATE", "You found a sealed crate.", [
                {l:"Open", f:()=>{ 
                    let s = Math.floor(Math.random()*10)+5;
                    run.loot += s; logExp(`Crate had ${s} Scrap.`, "good"); 
                }},
                {l:"Leave", f:()=>{ logExp("Ignored crate."); }}
            ]);
        }

        function showModal(t, d, choices) {
            document.getElementById('evt-title').innerText = t;
            document.getElementById('evt-desc').innerText = d;
            let cBox = document.getElementById('evt-choices'); cBox.innerHTML = '';
            choices.forEach(c => {
                let btn = document.createElement('button');
                btn.innerText = c.l;
                btn.onclick = ()=>{ c.f(); document.getElementById('event-overlay').style.display='none'; updateExpUI(); };
                cBox.appendChild(btn);
            });
            document.getElementById('event-overlay').style.display = 'flex';
        }

        function buyUpgrade(id, cost) {
            if(state.upgrades[id]) return alert("Owned!");
            if(state.stash.scrap >= cost) { state.stash.scrap-=cost; state.upgrades[id]=true; updateUI(); }
        }

        function setTheme(t) { document.body.className = t; state.theme = t; saveGame(); }

        function logBunker(m, t) {
            let d = document.createElement('div'); d.className=`msg ${t||''}`; d.innerText="> "+m;
            document.getElementById('bunker-log').prepend(d);
        }
        function logExp(m, t) {
            let d = document.createElement('div'); d.className=`msg ${t||''}`; d.innerText="> "+m;
            document.getElementById('exp-log').prepend(d);
        }

        function switchView(id, btn) {
            document.querySelectorAll('.view-container').forEach(e => e.classList.remove('active'));
            document.getElementById('view-'+id).classList.add('active');
            if(btn) {
                document.querySelectorAll('.nav-btn').forEach(e => e.classList.remove('active'));
                btn.classList.add('active');
            }
            updateUI();
        }

        function updateUI() {
            document.getElementById('hp-val').innerText = run.hp;
            document.getElementById('hp-bar').style.width = (run.hp)+"%";
            document.getElementById('day-val').innerText = state.stats.daysAlive;
            document.getElementById('scrap-val').innerText = state.stash.scrap;
            
            document.getElementById('stash-food').innerText = state.stash.food;
            document.getElementById('stash-meds').innerText = state.stash.meds;

            // Prep Grid
            let grid = document.getElementById('prep-grid'); grid.innerHTML = '';
            for(let i=0; i<run.backpack.food; i++) grid.innerHTML += `<div class="inv-slot filled">ü•©</div>`;
            for(let i=0; i<run.backpack.meds; i++) grid.innerHTML += `<div class="inv-slot filled">üíâ</div>`;
            for(let i=0; i<(5-(run.backpack.food+run.backpack.meds)); i++) grid.innerHTML += `<div class="inv-slot"></div>`;

            // Graveyard
            let gList = document.getElementById('grave-list');
            gList.innerHTML = state.graveyard.map(g => `
                <div class="tombstone">
                    <div class="tomb-title">${g.title}</div>
                    <div class="tomb-desc">Survived ${g.days} Days.<br>${g.cause}<br>${g.date}</div>
                </div>
            `).join('') || "<div style='text-align:center; color:#555;'>No Deaths Yet.</div>";

            saveGame();
        }
        function updateExpUI() {
            document.getElementById('mile-display').innerText = run.mile;
            document.getElementById('exp-hp').innerText = run.hp;
            document.getElementById('bar-hp').style.width = run.hp+"%";
            document.getElementById('pack-food').innerText = run.backpack.food;
            document.getElementById('pack-meds').innerText = run.backpack.meds;
        }

        function saveGame() { localStorage.setItem('wd_v14_save', JSON.stringify(state)); }
        function resetData() { if(confirm("Reset all?")) { localStorage.removeItem('wd_v14_save'); location.reload(); } }
        function clearGraveyard() { state.graveyard = []; updateUI(); }

    </script>
</body>
</html>
